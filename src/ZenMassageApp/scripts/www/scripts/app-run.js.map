{"version":3,"file":"app-run.js","sourceRoot":"","sources":["../../app/app-run.ts"],"names":["ZenMassageApp","ZenMassageApp.ApplicationStartup","ZenMassageApp.ApplicationStartup.constructor","ZenMassageApp.ApplicationStartup.initialize","ZenMassageApp.ApplicationStartup.onDeviceReady","ZenMassageApp.ApplicationStartup.onPause","ZenMassageApp.ApplicationStartup.onResume"],"mappings":"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","sourcesContent":["module ZenMassageApp {\r\n    'use strict';\r\n\r\n    interface IAppCookieService extends ng.cookies.ICookiesService {\r\n        userId: string;\r\n        pebbleUserId: string;\r\n    }\r\n\r\n    class ApplicationStartup {\r\n\r\n        constructor(\r\n            private $rootScope: ng.IRootScopeService,\r\n            private $window: ng.IWindowService,\r\n            private $cookies: IAppCookieService,\r\n            private currentUser: ICurrentUser,\r\n            private pebbleServices: IPebbleServices) {\r\n\r\n            $window.onload = (): void => {\r\n                this.initialize();\r\n            };\r\n\r\n            // Setup global user state\r\n            currentUser.userId = $cookies.userId;\r\n            currentUser.pebbleUserId = $cookies.pebbleUserId;\r\n        \r\n            // Placeholder for detecting route change errors\r\n            $rootScope.$on('$routeChangeError', (): void => { });\r\n        }\r\n\r\n        initialize(): void {\r\n            document.addEventListener('deviceready', (): void=> { this.onDeviceReady(); }, false);\r\n        }\r\n\r\n        onDeviceReady(): void {\r\n            // Handle the Cordova pause and resume events\r\n            document.addEventListener('pause', (): void=> { this.onPause(); }, false);\r\n            document.addEventListener('resume', (): void => { this.onResume(); }, false);\r\n\r\n            // TODO: Cordova has been loaded. Perform any initialization that requires Cordova here.\r\n            var pebble: IPebble = cordova.require('cordova-pebble.Pebble');\r\n            if (typeof pebble !== 'undefined' && pebble !== null) {\r\n\r\n                this.pebbleServices.pebble = pebble;\r\n\r\n                pebble.setAppUUID(\r\n                    '29207e29-1f35-4f89-9871-0a579e84d105',\r\n                    (info): void => {\r\n                        navigator.notification.alert(\r\n                            'watch app linked',\r\n                            (): void => { });\r\n                    },\r\n                    (error): void => {\r\n                        navigator.notification.alert(\r\n                            'watch app not linked',\r\n                            (): void => { });\r\n                    });\r\n            }\r\n        }\r\n\r\n        onPause(): void {\r\n            // TODO: This application has been suspended. Save application state here.\r\n        }\r\n\r\n        onResume(): void {\r\n            // TODO: This application has been reactivated. Restore application state here.\r\n        }\r\n\r\n    }\r\n\r\n\r\n    ApplicationStartup.$inject = ['$rootScope', '$window', '$cookies', 'currentUser', 'pebbleServices'];\r\n    angular\r\n        .module('app')\r\n        .run((\r\n            $rootScope: ng.IRootScopeService,\r\n            $window: ng.IWindowService,\r\n            $cookies: IAppCookieService,\r\n            currentUser: ICurrentUser,\r\n            pebbleServices: IPebbleServices) => {\r\n\r\n            return new ApplicationStartup($rootScope, $window, $cookies, currentUser, pebbleServices);\r\n        });\r\n}\r\n"]}